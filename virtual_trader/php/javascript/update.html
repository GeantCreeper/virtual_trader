<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Update</title>
</head>
<body>
    <h1>Le jeu est en cours de mise à jour...</h1>
    <p>Vous pouvez revenir à la page principale.</p>
   
    <script>
        // Crée un canal de communication
        const bc = new BroadcastChannel('update_channel');
    
        // Ferme cette fenêtre si on reçoit le message de déconnexion
        bc.addEventListener('message', (event) => {
            if (event.data === 'closeUpdate') {
                window.close();
            }
        });
    
        // Exécute une requête toutes les minutes
        setInterval(() => {
            fetch('/virtual_trader/php/update.php')
                .then(response => console.log('Mise à jour effectuée'))
                .catch(error => console.error('Erreur lors de la mise à jour', error));
        }, 60000);
    </script>    
</body>
</html>